[command]
default=run_scintelapi.sh

[env]
MESH_FILE_PATH=$LFRIC_MESH_FILE
SOURCE_DUMP_PATH=$SOURCE_DUMP

[file:input_mesh_faces.nc]
source=$MESH_FILE_PATH

[file:lfric.nl]
source=namelist:base_mesh namelist:extrusion namelist:finite_element
      =namelist:files
      =namelist:io
      =namelist:planet
      =namelist:partitioning
      =namelist:domain_size
      =namelist:formulation

[file:scintelapi.nl]
source=namelist:field_definitions(:) namelist:dependency_graphs(:)

[file:source_dump.nc]
source=$SOURCE_DUMP_PATH

[namelist:base_mesh]
f_lat_deg=45.0
filename='input_mesh_faces.nc'
fplane=.false.
geometry='spherical'
partitioner='cubedsphere'
prime_mesh_name='$LFRIC_MESH_NAME'
topology='fully_periodic'

[namelist:dependency_graphs(01)]
generator='init_field'
genpar='30.0'
!!input_fields=
output_fields='wind_speed'

[namelist:dependency_graphs(02)]
generator='a_times_X'
genpar='0.65'
input_fields='wind_speed'
output_fields='ns_wind'

[namelist:dependency_graphs(03)]
generator='X_minus_Y'
!!genpar=
input_fields='wind_speed','ns_wind'
output_fields='ew_wind'

[namelist:dependency_graphs(04)]
generator='init_field'
genpar='mdi'
!!input_fields=
output_fields='upward_wind'

[namelist:dependency_graphs(05)]
generator='read_from_dump'
genpar='theta_in_wtheta'
!!input_fields=
output_fields='theta_from_dump'

[namelist:dependency_graphs(06)]
generator='X_powreal_a'
genpar='1.15'
input_fields='theta_from_dump'
output_fields='theta'

[namelist:dependency_graphs(07)]
generator='read_from_dump'
genpar='dry_rho_in_w3'
!!input_fields=
output_fields='dry_rho_from_dump'

[namelist:dependency_graphs(08)]
generator='X_powint_n'
genpar='1'
input_fields='dry_rho_from_dump'
output_fields='dry_rho'

[namelist:dependency_graphs(09)]
generator='read_from_dump'
genpar='tstar'
!!input_fields=
output_fields='tstar_from_dump'

[namelist:dependency_graphs(10)]
generator='copy_field_data'
!!genpar=
input_fields='tstar_from_dump'
output_fields='tstar'

[namelist:dependency_graphs(11)]
generator='init_field'
genpar='1.0'
!!input_fields=
output_fields='unit_field_wtheta'

[namelist:dependency_graphs(12)]
generator='read_from_dump'
genpar='ozone_in_wtheta'
!!input_fields=
output_fields='ozone_from_dump'

[namelist:dependency_graphs(13)]
generator='X_times_Y'
!!genpar=
input_fields='ozone_from_dump','unit_field_wtheta'
output_fields='ozone'

[namelist:dependency_graphs(14)]
generator='read_from_dump'
genpar='mv_in_wtheta'
!!input_fields=
output_fields='mv_from_dump'

[namelist:dependency_graphs(15)]
generator='X_divideby_Y'
!!genpar=
input_fields='mv_from_dump','unit_field_wtheta'
output_fields='mv'

[namelist:dependency_graphs(16)]
generator='read_from_dump'
genpar='mcl_in_wtheta'
!!input_fields=
output_fields='mcl_from_dump'

[namelist:dependency_graphs(17)]
generator='read_from_dump'
genpar='mcf_in_wtheta'
!!input_fields=
output_fields='mcf_from_dump'

[namelist:dependency_graphs(18)]
generator='X_plus_Y'
!!genpar=
input_fields='mcl_from_dump','mcf_from_dump'
output_fields='total_cloud_water'

[namelist:dependency_graphs(19)]
generator='aX_plus_bY'
genpar='0.25 0.5'
input_fields='mcl_from_dump','mcf_from_dump'
output_fields='mcf'

[namelist:dependency_graphs(20)]
generator='X_minus_Y'
!!genpar=
input_fields='total_cloud_water','mcf_from_dump'
output_fields='mcl'

[namelist:domain_size]
planar_domain_max_x=1.0
planar_domain_max_y=1.0
planar_domain_min_x=-1.0
planar_domain_min_y=-1.0

[namelist:extrusion]
domain_top=39254.833575999997
method='um_L38_29t_9s_40km'
number_of_layers=$NUMBER_OF_LAYERS

[namelist:field_definitions(dry_rho)]
field_dim='3D'
field_id='dry_rho'
func_space='W3'
write_name='dry_rho_in_w3'
write_to_dump='y'

[namelist:field_definitions(dry_rho_from_dump)]
field_dim='3D'
field_id='dry_rho_from_dump'
func_space='W3'
!!write_name=
write_to_dump='n'

[namelist:field_definitions(ew_wind)]
field_dim='3D'
field_id='ew_wind'
func_space='W3'
write_name='ew_wind_in_w3'
write_to_dump='y'

[namelist:field_definitions(mcf)]
field_dim='3D'
field_id='mcf'
func_space='Wtheta'
write_name='mcf_in_wtheta'
write_to_dump='y'

[namelist:field_definitions(mcf_from_dump)]
field_dim='3D'
field_id='mcf_from_dump'
func_space='Wtheta'
!!write_name=
write_to_dump='n'

[namelist:field_definitions(mcl)]
field_dim='3D'
field_id='mcl'
func_space='Wtheta'
write_name='mcl_in_wtheta'
write_to_dump='y'

[namelist:field_definitions(mcl_from_dump)]
field_dim='3D'
field_id='mcl_from_dump'
func_space='Wtheta'
!!write_name=
write_to_dump='n'

[namelist:field_definitions(mv)]
field_dim='3D'
field_id='mv'
func_space='Wtheta'
write_name='mv_in_wtheta'
write_to_dump='y'

[namelist:field_definitions(mv_from_dump)]
field_dim='3D'
field_id='mv_from_dump'
func_space='Wtheta'
!!write_name=
write_to_dump='n'

[namelist:field_definitions(ns_wind)]
field_dim='3D'
field_id='ns_wind'
func_space='W3'
write_name='ns_wind_in_w3'
write_to_dump='y'

[namelist:field_definitions(ozone)]
field_dim='3D'
field_id='ozone'
func_space='Wtheta'
write_name='ozone_in_wtheta'
write_to_dump='y'

[namelist:field_definitions(ozone_from_dump)]
field_dim='3D'
field_id='ozone_from_dump'
func_space='Wtheta'
!!write_name=
write_to_dump='n'

[namelist:field_definitions(theta)]
field_dim='3D'
field_id='theta'
func_space='Wtheta'
write_name='theta_in_wtheta'
write_to_dump='y'

[namelist:field_definitions(theta_from_dump)]
field_dim='3D'
field_id='theta_from_dump'
func_space='Wtheta'
!!write_name=
write_to_dump='n'

[namelist:field_definitions(total_cloud_water)]
field_dim='3D'
field_id='total_cloud_water'
func_space='Wtheta'
!!write_name=
write_to_dump='n'

[namelist:field_definitions(tstar)]
field_dim='2D'
field_id='tstar'
func_space='W3'
write_name='tstar'
write_to_dump='y'

[namelist:field_definitions(tstar_from_dump)]
field_dim='2D'
field_id='tstar_from_dump'
func_space='W3'
!!write_name=
write_to_dump='n'

[namelist:field_definitions(unit_field_wtheta)]
field_dim='3D'
field_id='unit_field_wtheta'
func_space='Wtheta'
!!write_name=
write_to_dump='n'

[namelist:field_definitions(upward_wind)]
field_dim='3D'
field_id='upward_wind'
func_space='Wtheta'
write_name='upward_wind_in_wtheta'
write_to_dump='y'

[namelist:field_definitions(upward_wind_from_dump)]
field_dim='3D'
field_id='upward_wind_from_dump'
func_space='Wtheta'
!!write_name=
write_to_dump='n'

[namelist:field_definitions(wind_speed)]
field_dim='3D'
field_id='wind_speed'
func_space='W3'
write_to_dump='n'

[namelist:files]
checkpoint_stem_name='source_dump'

[namelist:finite_element]
cellshape='quadrilateral'
coord_order=1
coord_system='xyz'
element_order=0
rehabilitate=.true.
vorticity_in_w1=.true.

[namelist:formulation]
l_multigrid=.false.
use_multires_coupling=.false.
use_physics=.true.

[namelist:io]
checkpoint_frequency=1
checkpoint_read=.true.
checkpoint_write=.true.
diagnostic_frequency=1
nodal_output_on_w3=.false.
subroutine_counters=.false.
subroutine_timers=.false.
use_xios_io=.true.
write_diag=.false.
write_dump=.false.
write_minmax_tseries=.false.

[namelist:partitioning]
panel_decomposition='auto'

[namelist:planet]
cp=1005.0
gravity=9.80665
omega=7.292116E-5
p_zero=100000.0
radius=6371229.0
rd=287.05
scaling_factor=125.0
